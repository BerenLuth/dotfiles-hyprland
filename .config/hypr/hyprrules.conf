
##############################
### WINDOWS AND WORKSPACES ###
##############################

# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules

windowrule = match:class ^(zen)$, workspace 1
windowrule = match:class ^(firefox)$, workspace 1
windowrule = match:class ^(code)$, workspace 2
windowrule = match:class ^(dev.zed.Zed)$, workspace 2
windowrule = match:class ^(obsidian)$, workspace 3
windowrule = match:class ^(md.obsidian.Obsidian)$, workspace 3
windowrule = match:class ^(GitKraken)$, workspace 4
windowrule = match:class ^(GitKraken)$, suppress_event fullscreen
windowrule = match:class ^(org.mozilla.Thunderbird)$, workspace 5
windowrule = match:title ^(Element)$, workspace 6
windowrule = match:class ^(Spotify)$, workspace 7
windowrule = match:class ^(feishin)$, workspace special:music
windowrule = match:class ^(com.rafaelmardojai.Blanket)$, workspace special:music
windowrule = match:title ^(WhatsApp Web)$, workspace 6
windowrule = match:title ^(WhatsApp Web)$, tile on

windowrule {
  name = "Telegram"
  match:title = ^(Telegram)$
  workspace = 6
  group = set
  pseudo = on
  size = 800 600
}

windowrule {
  name = "Vesktop"
  match:class = ^(vesktop)$
  workspace = 6
  group = set
}

windowrule {
  name = "Megasync"
  match:class = ^(MEGAsync)$
  float = on
  move = cursor_x-window_w*0.5 48
}
# windowrule = match:class ^(MEGAsync)$, workspace 1
# windowrule = match:class ^(MEGAsync)$, float



# Keepass - main window
windowrule {
  name = "KeepassXC Main Window"
  match:class = ^(org.keepassxc.KeePassXC)$
  pin = on
  float = on
  size = 1200 800
  move = monitor_w/2-window_w/2 monitor_h/2-window_h/2
  border_color = rgba(2ECC71FF) rgba(27AE60FF) -45deg
  rounding = 16
}

# Keepass - floating window in the top right corner for the browser picker
windowrule {
  name = "KeePassXC Browser Access Request"
  match:title = ^(KeePassXC - Browser Access Request)$
  float = on
  move = monitor_w-window_w-10 monitor_h*0.06
}


######################
# Waybar utils rules #
######################

windowrule {
  name = "Pulseaudio"
  match:class = ^(org.pulseaudio.pavucontrol)$
  float = on
  size = 800 500
  move = monitor_w-window_w-10 monitor_h*0.06
  rounding = 16
}

windowrule {
  name = "Thunderbird calendar reminders"
  match:initial_title = ^(Calendar Reminders)$
  float = on
  size = 800 500
  move = monitor_w-window_w-10 monitor_h*0.06
  rounding = 16
}

windowrule {
  name = "Kitty waybar tool"
  match:class = ^(kitty-waybar-tool)$
  float = on
  size = 800 500
  move = monitor_w-window_w-10 monitor_h*0.06
  xray = on
  pin = on
  border_color = rgba(F2DB1DFF) rgba(D83D36FF) -45deg
}
# windowrule = float,class:^(kitty-waybar-tool)$
# windowrule = size 800 500,class:^(kitty-waybar-tool)$
# windowrule = move 100%-w-11 6% ,class:^(kitty-waybar-tool)$
# windowrule = xray, class:^(kitty-waybar-tool)$
# windowrule = pin, class:^(kitty-waybar-tool)$
# windowrule = bordercolor rgba(F2DB1DFF) rgba(D83D36FF) -45deg , class:^(kitty-waybar-tool)$

###################

# Localsend as a floating window
windowrule {
  name = "Localsend"
  match:class = ^(localsend|Kuro)$
  float = on
  size = 850 600
  move = monitor_w-window_w-10 monitor_h*0.06
  pin = on
  opacity = 0.8
  xray = on
  rounding = 16
}

windowrule {
  name = "calculator"
  match:title = ^(gnome-calculator|Calculator)$
  float = on
  size = 400 600
  move = cursor_x-32 cursor_y-32
  rounding = 16
}
windowrule {
  name = "GIMP export"
  match:title = ^(Export Image as PNG)$
  float = on
  size = 600 600
  move = monitor_w/2-window_w/2 monitor_h/2-window_h/2
  rounding = 16
}

windowrule {
  name = "satty"
  float = on
  match:title = ^(satty)$
  size = monitor_w*0.9 monitor_h*0.9
  center = on
  rounding = 16
  border_color = rgba(F2DB1DFF) rgba(D83D36FF) -45deg
  border_size = 4
}

windowrule {
  name = "Nautilus previewer"
  match:class = ^(org.gnome.NautilusPreviewer)$
  size = monitor_w*0.66 monitor_h*0.66
  center = on
  float = on
}

windowrule {
  name = "Calibre viewer"
  match:class = ^(calibre-ebook-viewer)$
  pseudo = on
}

layerrule = match:namespace logout_dialog, blur on
layerrule = match:namespace logout_dialog, xray on

layerrule = match:namespace swaync-control-center, blur on
layerrule = match:namespace swaync-control-center, ignore_alpha 0
layerrule = match:namespace swaync-control-center, dim_around on
layerrule = match:namespace swaync-control-center, blur_popups on
layerrule = match:namespace swaync-control-center, xray on

layerrule = match:namespace swaync-notification-window, blur on
layerrule = match:namespace swaync-notification-window, ignore_alpha 0
layerrule = match:namespace rofi, dim_around on
layerrule = match:namespace rofi, blur on

# Showmethekey
windowrule {
  name = "ShowMeTheKey"
  match:class = ^(showmethekey-gtk)$
  float = on
  size = 525 100
  move = monitor_w-window_w-32 monitor_h*0.9
  opacity = 0.8
  rounding = 32
  pin = on
}

# zbar 
windowrule {
  name = "ZBar"
  match:class = ^(zbar)$
  float = on
  size = 600 340
  move = monitor_w-window_w-32 monitor_h*0.06
  opacity = 0.8
  rounding = 32
  pin = on
}

windowrule {
  name = "magic terminal"
  match:class = ^(magic-terminal)$
  fullscreen = on
}

windowrule {
  name = "git terminal"
  match:class = ^(git-terminal)$
  pseudo = on
  size = monitor_w*0.8 monitor_h*0.8
}

###########
# Privacy #
###########



windowrule = match:class ^(org.telegram.desktop)$, no_screen_share on# Telegram
windowrule = match:class ^(org.keepassxc.KeePassXC)$, no_screen_share on # KeePassXC
windowrule = match:title ^(WhatsApp Web)$, no_screen_share on # whatsapp

# TODO these maybe can be improved to also check if it's in an instance of a browser
windowrule = match:title .*Gmail.*, no_screen_share on               # gmail
windowrule = match:title .*Google Calendar.*, no_screen_share on     # Google Calendar
windowrule = match:title .*To Do.*, no_screen_share on               # Microsoft To Do
windowrule = match:title .*Proton Mail.*, no_screen_share on         # Proton Mail
windowrule = match:title .*Proton Calendar.*, no_screen_share on     # Proton Calendar



###############
windowrule = match:class ^(feishin)$, opacity 0.95